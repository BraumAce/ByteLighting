---
category: 
- 大数据
tag: 
- 基础
---

# 大数据体系架构

<!-- more -->

## 1. 大数据概述



## 2. 相关概念

### 2.1 数据仓库

数据库主要用于「**事务处理**」，特别强调每秒能干多少事儿：QPS（每秒查询数）、TPS（每秒事务数）、IOPS（每秒读写数）等等。

而当业务发展到一定规模后，希望从大量的应用系统、业务数据中，进行关联分析，帮助业务更好地发展。但是数据库擅长**事务性**工作，不擅长**分析性**工作，于是就产生了「**数据仓库**」。

数据仓库相当于一个集成化数据管理的平台，从多个数据源抽取有价值的数据，在仓库内转换和流动，并提供给 BI 等分析工具进行处理。

因为分析型业务需要大量的 “读” 操作，所以数据仓库通过 “Denormalized” 化的方式优化表结构，减少表间联接，牺牲空间来换取读性能。并使用列式存储优化，来进一步提高查询速度、降低开销。

### 2.2 数据湖

企业在持续发展过程中，数据也在不断堆积，重要的关键数据可以存储在数据库、数据仓库中。但是企业中还存在大量的与业务没有直接关联的辅助型数据，希望都能够完整保存下来，这时候就需要「**数据湖**」来做。

数据湖，本质上是由 “**数据存储架构** + **数据处理工具**” 组成的**解决方案**，而不是某个单一产品。

1. **数据存储架构**，要有足够的扩展性和可靠性，要满足企业能把所有原始数据都 “囤” 起来，存得下、存得久。

2. **数据处理工具**，分为两大类：
   1. **治理工具**，解决的问题是如何把数据 “搬到” 湖里，包括定义数据源、制定数据访问策略和安全策略，并移动数据、编制数据目录等等。
   2. **分析工具**，解决的问题是如何对数据进行分析、挖掘和利用，包括对数据进行查询，应用数据解决实际问题等。

::: info 数据库 VS 数据仓库

1. 数据上：
   1. 数据仓库里的数据精挑细选，价值密度更高，含金量更高；
   2. 数据湖将数据照单全收，更有一种 “兜底” 的感觉，一股脑全部接收。
2. 产品上：
   1. 数据仓库可以是独立的标准化产品；
   2. 数据湖则是一种架构，通常以对象存储为基础，结合一系列数据管理工具。

:::

### 2.3 湖仓一体

数据湖起步成本很低，但随着数据体量增大，TCO 成本会加速飙升；数仓则恰恰相反，前期建设开支很大。一个后期成本高，一个前期成本高，对于既想修湖、又想建仓的用户来说，难以抉择。

所以，根据两者的特点，都是拿数据为业务服务，数据湖和数仓作为两大“数据集散地”，人们尝试着将彼此整合一下，让数据流动起来，少点重复建设。

于是，为推动数仓和数据湖的打通融合，诞生了「**Lake House**」，即**湖仓一体**。

Lake House 架构最重要的一点，是实现 “湖里” 和 “仓里” 的数据/元数据能够无缝打通，并且 “自由” 流动。湖里的 “新鲜” 数据可以流到仓里，甚至可以直接被数仓使用，而仓里的 “不新鲜” 数据，也可以流到湖里，低成本长久保存，供未来的数据挖掘使用。

通常需要满足以下要求：

1. 可以将数据湖中最近几个月的 “热数据” 摄取到数仓中；
2. 反过来，也可以轻松将大量冷门历史数据从数仓转移至成本更低廉的数据湖内，同时这些移到湖里的数据，仍然可以被数仓查询使用;
3. 处理数仓内的热数据与数据湖中的历史数据，生成丰富的数据集，全程无需执行任何数据移动操作；
4. 生成的新数据集可以插入到数仓中的表内，或者直接插入由数据湖托管的外部表中。

不仅如此，把数据湖和数据仓库集成起来只是第一步，还要把湖、仓以及所有其他数据处理服务组成统一且连续的整体，即「**智能湖仓**」。

智能湖仓并非单一产品，它描述的是一种架构。这套架构，以**数据湖**为中心，把数据湖作为**中央存储库**，再围绕数据湖建立专用 “**数据服务环**”，环上的服务包括了 **数仓**、**机器学习**、**大数据处理**、**日志分析**，甚至 RDS 和 NoSQL 服务等等。

大家 “**环湖而饲**”，既可以直接操纵湖内数据，也可以从湖中摄取数据，还可以向湖中回注数据，同时环湖的服务彼此之间也可以轻松交换数据。

任何热门的数据处理服务，都在湖边建好了，任何对口的数据都能召之即来、挥之则去。依靠这种无缝集成和数据移动机制，用户就能从容地用对的工具从对的数据中，挖出干货！

从数据获取到数据应用到完整流程上，AWS 官方给出了智能湖仓的参考架构：

![]()

### 2.4 OLTP 与 OLAP

事务（OLTP）、分析（OLAP）

### 2.5 RP - 关系投影



### 2.6 物化视图




